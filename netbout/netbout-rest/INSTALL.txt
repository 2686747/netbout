Copyright (c) 2009-2011, netBout.com
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are PROHIBITED without prior written permission from
the author. This product may NOT be used anywhere and on any computer
except the server platform of netBout Inc. located at www.netbout.com.
Federal copyright law prohibits unauthorized reproduction by any means
and imposes fines up to $25,000 for violation. If you received
this code occasionally and without intent to use it, please report this
incident to the author by email.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
SUCH DAMAGE.
-----------------------------------------------------------------------------

Deployment to Amazon Elastic Beanstalk

    The application has to be deployed to Amazon Elastic Beanstalk
    (http://aws.amazon.com/elasticbeanstalk/).

    settings.xml file shall contain the s3.accessKey and s3.sharedKey according
    to instructions laid out at http://beanstalker.ingenieux.com.br/usage.html,
    sections "Quick Start" and "Credentials":

        <settings>
          <profile>
            <profile>
              <id>netbout</id>
              <properties>
                <aws.accessKey>..</aws.accessKey>
                <aws.secretKey>..</aws.secretKey>
              </properties>
            </profile>
          </profiles>
        </settings>

    In order to get these credentials you should login to Amazon console
    and go to Manage Credentials. Pay attention that IAM credentials won't work here.

    Log into the Amazon Console, into the S3 Tab. Create an S3 Bucket named
    "webapps.netbout.com" (matching the one under "s3Bucket" property in pom.xml).
    This one is meant to hold the war files for all the beanstalk applications.

    Run "mvn -Dci clean deploy". This should upload the source s3 object and
    create both application and application version, but not launch the environment.
    The build will fail with message: "No Environment found for EnvironmentName = 'netbout'".
    It's totally OK.

    Back to the AWS console (still under S3 Tab), see of there is a new directory
    with the new war file under the "webapps.netbout.com" bundle.

    Move back to Elastic Beanstalk tag. Select the web application
    you just created (automatically), and chose 'Click here to launch a new environment'.
    This shall take some time.

    Under the environment details tab, fill the URL to match the cnamePrefix,
    and environment name to match environmentName in pom.xml. The application
    Version should be already defaulted to the one you just created. If needed,
    change the container type. Click "next", review the defaults, then "next",
    then "finish".

    Click the 'Events' tab. Wait for the environment to bring up.
    CAUTION: By default, Beanstalk checks the root path of your application
    and expects a 200 status for OK. If it timeouts or returns anything other
    than status code 200, better review the Health Check URL

    Move back to command line and reissue the last "mvn deploy" command.

    When done, refresh the 'Events Tab'. If things were ok, events are
    showing a new version under the environment you created under the
    'Versions' tab ("Running on: netbout")

    Now you should allow Amazon RDS to accept connections from
    this new environment.
